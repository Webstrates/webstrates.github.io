<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Restoration and Deletion | Webstrates</title>
	<meta name="description" content="A research prototype enabling collaborative editing of websites through DOM manipulations.">
	<link rel="stylesheet" href="/css/syntax.css">
	<link rel="stylesheet" href="/css/main.css">
</head>
<body>
	<div id="container">
		<header>
			<h1>
				<a class="brand" href="/">Webstrates</a>
				<small>A research prototype enabling collaborative editing of websites through DOM manipulations.</small>
			</h1>
		</header>
		<main>
			<div id="navigation">
				<ul class="nav nav-list">
					<li class="home"><a href="/">Home</a></li>
					<li>
						<a class="nav-header" href="">Getting started</a>
						<ul>
							<!--li><a href="/gettingstarted/motivation.html">Motivation</a></li-->
							<li><a href="/gettingstarted/installation.html">Installation</a></li>
							<li><a href="/gettingstarted/hello-world.html">Hello, world</a></li>
							<li><a href="/userguide/tutorials.html">Tutorials</a></li>
						</ul>
					</li>
					<li>
						<a class="nav-header" href="">User guide</a>
						<ul>
							<li><a href="/userguide/api.html">API</a></li>
							<li>
								<ul>
									<li><a href="/userguide/api/events.html">Events</a></li>
									<li><a href="/userguide/api/transient.html">Transient</a></li>
									<li><a href="/userguide/api/cookies.html">Cookies</a></li>
									<li><a href="/userguide/api/assets.html">Assets</a></li>
									<li><a href="/userguide/api/signaling.html">Signaling</a></li>
									<li><a href="/userguide/api/messaging.html">Messaging</a></li>
									<li><a href="/userguide/api/tagging.html">Tagging</a></li>
									<li><a href="/userguide/api/access-tokens.html">Access Tokens</a></li>
									<li><a class="active" href="/userguide/api/restore-delete.html">Restore/Delete</a></li>
								</ul>
							</li>
							<li><a href="/userguide/http-api.html">HTTP API</a></li>
							<li><a href="/userguide/server-config.html">Server Config</a></li>
							<li><a href="/userguide/client-config.html">Client Config</a></li>
							<li><a href="/userguide/versioning.html">Versioning</a></li>
						</ul>
					</li>
					<li>
						<a class="nav-header" href="">Developer guide</a>
						<ul>
							<li><a href="/developerguide/introduction.html">Introduction</a></li>
							<li><a href="/developerguide/how-it-works.html">How it works</a></li>
							<li><a href="/developerguide/creating-a-module.html">Creating a module</a></li>
						</ul>
					</li>
				</ul>
			</div>
			<div id="content">
				<div class="page-header">
					<h1>Restoration and Deletion
						
					</h1>
				</div>
				<ul id="markdown-toc">
  <li><a href="#restoring-a-webstrate" id="markdown-toc-restoring-a-webstrate">Restoring a webstrate</a></li>
  <li><a href="#deleting-a-webstrate" id="markdown-toc-deleting-a-webstrate">Deleting a webstrate</a></li>
</ul>

<h2 id="restoring-a-webstrate">Restoring a webstrate</h2>

<p>Webstrates has very fine-grained versioning control, saving every key stroke in the
<a href="/userguide/operations-history.html">operations history</a>. Restoring a document to a previous version
can be done either through the <a href="/userguide/http-api.html#restoring-a-webstrate">HTTP API</a>:</p>

<ul>
  <li>GET on <code class="highlighter-rouge">http://&lt;hostname&gt;/&lt;webstrateId&gt;?restore=&lt;versionOrTag&gt;</code> restores the document to look like
it did in version or <a href="/userguide/api/tagging.html">tag</a> <code class="highlighter-rouge">&lt;versionOrTag&gt;</code> and redirects the user to
<code class="highlighter-rouge">/&lt;webstrateId&gt;</code>. This will apply operations on the current verison until the desired version is
reached and will therefore not break the operations log or remove from it, but only add additional
operations.</li>
</ul>

<p>Or through the JavaScript API by calling <code class="highlighter-rouge">webstrate.restore(versionOrTag, fn)</code>. <code class="highlighter-rouge">fn</code> is
a function callback that takes two arguments, a potential error (null on success) and the new
version:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">webstrate</span><span class="p">.</span><span class="nx">restore</span><span class="p">(</span><span class="nx">versionOrTag</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">newVersion</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Handle error.</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="c1">// Otherwise, document is now at newVersion, identical to</span>
    <span class="c1">// the document at versionOrTag.</span>
<span class="p">});</span>
</code></pre>
</div>

<p><code class="highlighter-rouge">webstrate.restore</code> returns a new version, because when restoring a document, the history is not
actually reverted, rather appended to. A bunch of operations is applied to the document to make the
document identical to what it was at the requested version.</p>

<p>To find out more about why and it works, check out the
<a href="/userguide/operations-history.html#restoring-a-document">Operations History</a> page.</p>

<h2 id="deleting-a-webstrate">Deleting a webstrate</h2>

<p>Deleting a webstrate can exclusivel be done through the <a href="http://localhost:4000/userguide/http-api.html#deleting-a-webstrate">HTTP API</a>:</p>

<ul>
  <li>GET on <code class="highlighter-rouge">http://&lt;hostname&gt;/&lt;webstrateId&gt;?delete</code> will delete the document and redirect all
connected users to the server root. The webstrate data including operations history, tags, assets,
etc. will all be completely and unrecoverably deleted.</li>
</ul>

<p>This versioning can be accessed through
the HTTP API, i.e. <code class="highlighter-rouge">?ops</code> and
accessing previous versions, see also tags for marking versions with memorables names.</p>



				<div>

					<div id="navigation"></div>
					<div id="disqus">
<div id="disqus_thread"></div>
<script type="text/javascript">
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	dsq.src = '//' + 'webstrates' + '.disqus.com/embed.js';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

	function waitForIframe(callback) {
		var iframe = 	document.querySelector('iframe[id^=dsq]');
		if (iframe) return callback(iframe);
		setTimeout(waitForIframe, 0, callback);
	}
	waitForIframe(function(iframe) {
		var scale = 0.88, width = 1/scale * 100, offset = (width - 100) / 2;
		iframe.setAttribute("style", `transform:scale(${scale});width:${width}%;margin-left:-${offset}%;`);
	});
})();
</script>
					</div>

				</div>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-104382751-1', 'auto');
ga('send', 'pageview');
</script>

			</div>
		</main>
		<footer>
			Documentation for <a href="https://github.com/Webstrates/Webstrates">Webstrates</a>
		</footer>
	</div>
</body>
</html>
