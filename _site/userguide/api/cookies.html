<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Cookies | Webstrates</title>
	<meta name="description" content="A research prototype enabling collaborative editing of websites through DOM manipulations.">
	<link rel="stylesheet" href="/css/syntax.css">
	<link rel="stylesheet" href="/css/main.css">
</head>
<body>
	<div id="container">
		<header>
			<h1>
				<a class="brand" href="/">Webstrates</a>
				<small>A research prototype enabling collaborative editing of websites through DOM manipulations.</small>
			</h1>
		</header>
		<main>
			<div id="navigation">
				<ul class="nav nav-list">
					<li class="home"><a href="/">Home</a></li>
					<li>
						<a class="nav-header" href="">Getting started</a>
						<ul>
							<!--li><a href="/gettingstarted/motivation.html">Motivation</a></li-->
							<li><a href="/gettingstarted/installation.html">Installation</a></li>
							<li><a href="/gettingstarted/hello-world.html">Hello, world</a></li>
							<li><a href="/userguide/tutorials.html">Tutorials</a></li>
						</ul>
					</li>
					<li>
						<a class="nav-header" href="">User guide</a>
						<ul>
							<li><a href="/userguide/api.html">API</a></li>
							<li>
								<ul>
									<li><a href="/userguide/api/events.html">Events</a></li>
									<li><a href="/userguide/api/transient.html">Transient</a></li>
									<li><a class="active" href="/userguide/api/cookies.html">Cookies</a></li>
									<li><a href="/userguide/api/assets.html">Assets</a></li>
									<li><a href="/userguide/api/signaling.html">Signaling</a></li>
									<li><a href="/userguide/api/messaging.html">Messaging</a></li>
									<li><a href="/userguide/api/tagging.html">Tagging</a></li>
									<li><a href="/userguide/api/access-tokens.html">Access Tokens</a></li>
									<li><a href="/userguide/api/restore-delete.html">Restore/Delete</a></li>
								</ul>
							</li>
							<li><a href="/userguide/http-api.html">HTTP API</a></li>
							<li><a href="/userguide/server-config.html">Server Config</a></li>
							<li><a href="/userguide/client-config.html">Client Config</a></li>
							<li><a href="/userguide/versioning.html">Versioning</a></li>
						</ul>
					</li>
					<li>
						<a class="nav-header" href="">Developer guide</a>
						<ul>
							<li><a href="/developerguide/introduction.html">Introduction</a></li>
							<li><a href="/developerguide/how-it-works.html">How it works</a></li>
							<li><a href="/developerguide/creating-a-module.html">Creating a module</a></li>
						</ul>
					</li>
				</ul>
			</div>
			<div id="content">
				<div class="page-header">
					<h1>Cookies
						
					</h1>
				</div>
				
<p>Webstrates has a built-in cookie mechanism that allows logged in users to persist JavaScript objects
across devices. There are two kinds of cookies: “anywhere” cookies, which may be accessed and
modified from any webstrate the user is accessing, and document-bound cookies (“here”), only
available from the webstrate they were created in.</p>

<p>The cookies are simple key-value stores persisted on the server and distributed to the user’s
connected clients. Any serializable JavaScript object can be stored in cookies. To set an “anywhere”
cookie <code class="highlighter-rouge">foo</code> with the value <code class="highlighter-rouge">bar</code>, call:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">webstrate</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">cookies</span><span class="p">.</span><span class="nx">anywhere</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">,</span> <span class="s2">"bar"</span><span class="p">);</span>
</code></pre>
</div>

<p>To retrieve it again (possibly in another webstrate, from another device the user is logged in to),
the application/user may call:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">webstrate</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">cookies</span><span class="p">.</span><span class="nx">anywhere</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s2">"foo"</span><span class="p">);</span>
</code></pre>
</div>

<p>and get back <code class="highlighter-rouge">bar</code>. “here” cookies are managed in a similar fashion through
<code class="highlighter-rouge">webstrate.cookies.here.set()</code> and <code class="highlighter-rouge">webstrate.cookies.here.get()</code>.</p>

<p>To retrieve all cookies, call <code class="highlighter-rouge">get()</code> without any parameters on either the <code class="highlighter-rouge">here</code> or <code class="highlighter-rouge">anywhere</code>
object.</p>

<p>Cookies can only be saved for logged-in users, hence their placement on the <code class="highlighter-rouge">webstrate.user</code> object,
which won’t exist for non-logged in users.</p>

<p>Listening for cookie updates can be done by subscribing to <code class="highlighter-rouge">cookieUpdateHere</code> and
<code class="highlighter-rouge">cookieUpdateAnywhere</code> events, e.g.:</p>

<div class="language-javascript highlighter-rouge"><pre class="highlight"><code><span class="nx">webstrate</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s2">"cookieUpdateHere"</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// A cookie key-value pair was added/updated.</span>
<span class="p">});</span>
</code></pre>
</div>

<p>Note that contrary to HTTP cookies, the cookies’ contents are stored on the server; only the session
token (the user’s credentials) are stored in an actual HTTP cookie. A value set on one client will
therefore be persisted to all of the user’s other connected clients (other computers, tablets,
etc.).</p>



				<div>

					<div id="navigation"></div>
					<div id="disqus">
<div id="disqus_thread"></div>
<script type="text/javascript">
(function() {
	var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
	dsq.src = '//' + 'webstrates' + '.disqus.com/embed.js';
	(document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);

	function waitForIframe(callback) {
		var iframe = 	document.querySelector('iframe[id^=dsq]');
		if (iframe) return callback(iframe);
		setTimeout(waitForIframe, 0, callback);
	}
	waitForIframe(function(iframe) {
		var scale = 0.88, width = 1/scale * 100, offset = (width - 100) / 2;
		iframe.setAttribute("style", `transform:scale(${scale});width:${width}%;margin-left:-${offset}%;`);
	});
})();
</script>
					</div>

				</div>


<script>
(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-104382751-1', 'auto');
ga('send', 'pageview');
</script>

			</div>
		</main>
		<footer>
			Documentation for <a href="https://github.com/Webstrates/Webstrates">Webstrates</a>
		</footer>
	</div>
</body>
</html>
